{
  "TestCaseName": "Action: Durable Function / JSON Seed",
  "Arrange": [
    {
      "Strategy": "JsonFileSeed",
      "Parameters": {
        "table": "Customers",
        "dataFile": "data\\new-customers.json",
        "Outputs": [
          {
            "VariableName": "newCustomerId",
            "Source": {
              "FromTable": "Customers",
              "SelectColumn": "CustomerId",
              "OrderByColumn": "CustomerId",
              "OrderDirection": "DESC"
            }
          }
        ]
      }
    }
  ],
  "Actions": [
    {
      "Strategy": "DurableFunction",
      "Parameters": {
        "OrchestratorName": "OrderOrchestrator",
        "Payload": {
          "CustomerId": "{newCustomerId}",
          "NewEmail": "alice.smith@example.com"
        },
        "PollingTimeoutSeconds": 120,
        "ExpectedStatus": "Completed"
      }
    }
  ],
  "Assert": [
    {
      "Strategy": "SingleLevel",
      "Parameters": {
        "TableName": "Customers",
        "ExpectedDataFile": "expected\\one-customer-remains.json",
        "ComparisonRule": {
          "Name": "IgnoreColumns",
          "Parameters": [ "CustomerId" ]
        }
      }
    }  
  ]
}